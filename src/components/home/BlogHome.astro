---
import BlogCard from '@components/shared/blog/BlogCard.astro';
import Title from '@components/shared/title/Title.astro';
import ArrowRight from '@assets/icons/arrow-right.svg';
import {getLangFromUrl, useTranslations } from '@i18n/utils';
import { getCollection } from 'astro:content';


interface Article {
    data: {
        title: string;
        except: string;
        source: 'Axopen' | 'Dev.to' | 'Medium';
        url: string;
    }
}


const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

interface Props {
    data: MD;
}

const {
    data
} = Astro.props;

const {
    blog,
} = data.frontmatter;

const Content = data.Content;

const articles: Article[] = (await getCollection('blog')).slice(0, 4);


---
<div id="blog-home" class="pb-40 overflow-x-hidden">
    <div class="container flex flex-col gap-4">
        <Title text={blog} tag="h2" />
        <div class="cms">
            <Content />
        </div>
    </div>
    <div class="container relative h-[320px] mt-8 overflow-x-auto scrollbar-hide">
        <div class="blog-container flex gap-8">
            {articles.map(article => (
                <BlogCard 
                    title={article.data.title} 
                    excerpt={article.data.except} 
                    source={article.data.source}
                    url={article.data.url}
                />
            ))}
        </div>
    </div>
    <div class="container flex justify-end mt-10">
        <a href="/blog">
            <div class="flex items-center gap-1">
                <span>
                    {t('blog.see-more')}
                </span>
                <ArrowRight />
            </div>
        </a>
    </div>
</div>

<style lang="scss">
    .blog-container {
        position: absolute;
    }
    .scrollbar-hide {
        -ms-overflow-style: none; /* Internet Explorer 10+ */
        scrollbar-width: none; /* Firefox */
    }
    .scrollbar-hide::-webkit-scrollbar {
        display: none; /* WebKit */
    }
</style>